(()=>{"use strict";var e={195:(e,n,t)=>{t.d(n,{Z:()=>s});var r=t(81),o=t.n(r),a=t(645),i=t.n(a)()(o());i.push([e.id,'html,\nbody {\n  margin: 0;\n  padding: 0;\n  height: 100%;\n  color: #2d2c2c;\n  font-family: "Helvetica Neue",\n  Arial,\n  "Hiragino Kaku Gothic ProN",\n  "Hiragino Sans",\n  Meiryo,\n  sans-serif;\n}\n\na,\na:visited {\n  color: #2d2c2c;\n}\n\na:hover {\n  color: #575656;\n}\n\nul {\n  padding-left: 14px;\n}\n\ndt {\n  font-weight: bold;\n}\n\nbutton {\n  color: #2d2c2c;\n}\n\ninput[type=text],\ninput[type=number] {\n  font-size: 16px;\n}\n\n.stbo-generator-page {\n  display: grid;\n  grid-template-columns: 1fr 420px;\n  height: 100%;\n}\n\n.stbo-generator-page-preview {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  padding: 16px;\n  background-image: linear-gradient(0deg, transparent 31px, #cecece 32px), linear-gradient(90deg,  transparent 31px, #cecece 32px);\n  background-size: 32px 32px;\n}\n\n.stbo-generator-page-generator {\n  padding: 16px;\n  height: 100%;\n  background-color: #f6f5f1;\n  box-sizing: border-box;\n  overflow: auto;\n}\n\n.stbo-generator-page-preview-debug {\n  margin: 8px 0;\n  font-size: 12px;\n  text-align: center;\n}\n\n.stbo-generator-page-title {\n  margin: 16px 0;\n  font-size: 16px;\n  font-weight: bold;\n  text-align: center;\n}\n\n.stbo-generator-page-title-version {\n  display: block;\n  font-size: 12px;\n}\n\n.stbo-generator-page-buttons {\n  margin-top: 32px;\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n}\n\n.stbo-generator-page-buttons > .stbo-generator-page-button {\n  display: flex;\n}\n\n.stbo-generator-page-button {\n  display: inline-flex;\n  justify-content: center;\n  align-items: center;\n  height: 42px;\n  font-size: 16px;\n  font-weight: bold;\n  box-sizing: border-box;\n}\n\n.stbo-generator-page-button-primary {\n  background-color: #2d2c2c;\n  border: 1px solid #2d2c2c;\n  color: #f6f5f1;\n  padding: 8px;\n  margin: 0;\n  border-radius: 50vh;\n  box-shadow: 0 2px 4px rgba(187, 171, 67, 0.07);\n}\n\n.stbo-generator-page-button-primary:hover {\n  background-color: #3f3f3e;\n}\n\n.stbo-generator-page-button-secondary {\n  background-color: transparent;\n  border: 1px solid #2d2c2c;\n  padding: 8px;\n  margin: 0;\n  border-radius: 50vh;\n  box-shadow: 0 2px 4px rgba(187, 171, 67, 0.07);\n}\n\n.stbo-generator-page-button-secondary:hover {\n  background-color: rgba(0, 0, 0, 0.1);\n}\n\n/**\n * フォーム\n */\n.stbo-generator-page-form {\n  flex: 1;\n}\n\n.stbo-generator-page-form-format {\n  border-radius: 5px;\n  font-size: 12px;\n  background-color: #fff;\n  box-shadow: 0 2px 4px rgba(187, 171, 67, 0.07);\n}\n\n.stbo-generator-page-form-format-item {\n  padding: 8px;\n  display: flex;\n  align-items: center;\n}\n\n.stbo-generator-page-form-format-item:first-child {\n  border-top-left-radius: 5px;\n  border-top-right-radius: 5px;\n}\n\n.stbo-generator-page-form-format-item:last-child {\n  border-bottom-left-radius: 5px;\n  border-bottom-right-radius: 5px;\n}\n\n.stbo-generator-page-form-format-item + .stbo-generator-page-form-format-item {\n  border-top: 1px solid #e1e1e1;\n}\n\n.stbo-generator-page-form-format-item:hover {\n  background-color: rgba(0, 0, 0, 0.1);\n}\n\n.stbo-generator-page-form-format-item-label {\n  font-weight: bold;\n  flex: 1;\n  margin: 0 8px;\n}\n\n.stbo-generator-page-form-stage {\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n  border-radius: 5px;\n  padding: 8px;\n  background-color: #fff;\n  box-shadow: 0 2px 4px rgba(187, 171, 67, 0.07);\n}\n\n.stbo-generator-page-form-stage + .stbo-generator-page-form-stage {\n  margin-top: 16px;\n}\n\n.stbo-generator-page-form-stage-title {\n  position: absolute;\n  top: 0;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  font-weight: bold;\n  font-size: 14px;\n  background-color: #f6f5f1;\n}\n\n.stbo-generator-page-form-stage-label {\n  font-size: 14px;\n  font-weight: bold;\n  display: block;\n  margin: 0 0 4px 0;\n}\n\n.stbo-generator-page-form-stage-note {\n  font-size: 12px;\n  display: block;\n  margin: 4px 0;\n}\n\n.stbo-generator-page-form-stage-drop-zone {\n  border-radius: 5px;\n  border: 1px dashed #e1e1e1;\n  padding: 8px;\n}\n\n.stbo-generator-page-form-stage:not(:first-child):hover\n  .stbo-generator-page-form-stage-delete {\n  visibility: visible;\n}\n\n.stbo-generator-page-form-stage-delete {\n  visibility: hidden;\n  display: inline-flex;\n  position: absolute;\n  top: -12px;\n  right: -12px;\n  font-size: 12px;\n  background-color: #2d2c2c;\n  border: 1px solid #2d2c2c;\n  color: #fff;\n  border-radius: 50vh;\n  align-items: center;\n  justify-content: center;\n  width: 24px;\n  height: 24px;\n}\n\n.stbo-generator-page-form-stage-add {\n  display: flex;\n  border-radius: 5px;\n  border: none;\n  background-color: transparent;\n  padding: 8px;\n  font-size: 12px;\n  text-align: center;\n  margin-top: 8px;\n  width: 100%;\n  justify-content: right;\n  align-content: center;\n}\n\n.stbo-generator-page-form-common {\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n  padding: 8px;\n}\n\n.stbo-generator-page-form-common input {\n  width: 100%;\n  height: 32px;\n  border: 1px solid #f6f5f1;\n  border-radius: 5px;\n  box-shadow: 0 2px 4px rgba(187, 171, 67, 0.07);\n}\n\n.stbo-generator-page-form-common input[type="number"] {\n  text-align: right;\n}\n\n.stbo-generator-page-form-title {\n  font-size: 16px;\n  text-align: center;\n  font-weight: bold;\n  margin: 32px 0 16px 0;\n}\n\n.stbo-generator-page-form-title:first-child {\n  margin-top: 0;\n}\n\n.stbo-generator-page-form-note {\n  display: block;\n  font-weight: normal;\n  font-size: 12px;\n  text-align: center;\n}\n\n.stbo-generator-page-terms {\n  font-size: 12px;\n}\n\n/*\n * ヘルプ\n */\n\n.stbo-generator-page-help {\n  padding: 24px;\n  border-radius: 5px;\n  background-color: #fff;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  min-width: 300px;\n  max-width: 80vw;\n  max-height: 80vh;\n  transform: translate(-50%, -50%);\n  box-shadow: 0 2px 4px rgba(187, 171, 67, 0.07);\n  font-size: 14px;\n  box-sizing: border-box;\n}\n\n.stbo-generator-page-backdrop {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.4);\n}\n\n/*\n * レスポンシブ\n */\n@media screen and (max-width: 728px) {\n  .stbo-generator-page-preview {\n    padding: 0;\n  }\n\n  .stbo-generator-page-generator {\n    overflow: visible;\n  }\n\n  .stbo-generator-page {\n    grid-template-columns: 1fr;\n  }\n}\n',""]);const s=i},645:e=>{e.exports=function(e){var n=[];return n.toString=function(){return this.map((function(n){var t="",r=void 0!==n[5];return n[4]&&(t+="@supports (".concat(n[4],") {")),n[2]&&(t+="@media ".concat(n[2]," {")),r&&(t+="@layer".concat(n[5].length>0?" ".concat(n[5]):""," {")),t+=e(n),r&&(t+="}"),n[2]&&(t+="}"),n[4]&&(t+="}"),t})).join("")},n.i=function(e,t,r,o,a){"string"==typeof e&&(e=[[null,e,void 0]]);var i={};if(r)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(i[c]=!0)}for(var l=0;l<e.length;l++){var p=[].concat(e[l]);r&&i[p[0]]||(void 0!==a&&(void 0===p[5]||(p[1]="@layer".concat(p[5].length>0?" ".concat(p[5]):""," {").concat(p[1],"}")),p[5]=a),t&&(p[2]?(p[1]="@media ".concat(p[2]," {").concat(p[1],"}"),p[2]=t):p[2]=t),o&&(p[4]?(p[1]="@supports (".concat(p[4],") {").concat(p[1],"}"),p[4]=o):p[4]="".concat(o)),n.push(p))}},n}},81:e=>{e.exports=function(e){return e[1]}},379:e=>{var n=[];function t(e){for(var t=-1,r=0;r<n.length;r++)if(n[r].identifier===e){t=r;break}return t}function r(e,r){for(var a={},i=[],s=0;s<e.length;s++){var c=e[s],l=r.base?c[0]+r.base:c[0],p=a[l]||0,u="".concat(l," ").concat(p);a[l]=p+1;var f=t(u),d={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==f)n[f].references++,n[f].updater(d);else{var g=o(d,r);r.byIndex=s,n.splice(s,0,{identifier:u,updater:g,references:1})}i.push(u)}return i}function o(e,n){var t=n.domAPI(n);return t.update(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap&&n.supports===e.supports&&n.layer===e.layer)return;t.update(e=n)}else t.remove()}}e.exports=function(e,o){var a=r(e=e||[],o=o||{});return function(e){e=e||[];for(var i=0;i<a.length;i++){var s=t(a[i]);n[s].references--}for(var c=r(e,o),l=0;l<a.length;l++){var p=t(a[l]);0===n[p].references&&(n[p].updater(),n.splice(p,1))}a=c}}},569:e=>{var n={};e.exports=function(e,t){var r=function(e){if(void 0===n[e]){var t=document.querySelector(e);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}n[e]=t}return n[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}},216:e=>{e.exports=function(e){var n=document.createElement("style");return e.setAttributes(n,e.attributes),e.insert(n,e.options),n}},565:(e,n,t)=>{e.exports=function(e){var n=t.nc;n&&e.setAttribute("nonce",n)}},795:e=>{e.exports=function(e){var n=e.insertStyleElement(e);return{update:function(t){!function(e,n,t){var r="";t.supports&&(r+="@supports (".concat(t.supports,") {")),t.media&&(r+="@media ".concat(t.media," {"));var o=void 0!==t.layer;o&&(r+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),r+=t.css,o&&(r+="}"),t.media&&(r+="}"),t.supports&&(r+="}");var a=t.sourceMap;a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),n.styleTagTransform(r,e,n.options)}(n,e,t)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)}}}},589:e=>{e.exports=function(e,n){if(n.styleSheet)n.styleSheet.cssText=e;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(e))}}}},n={};function t(r){var o=n[r];if(void 0!==o)return o.exports;var a=n[r]={id:r,exports:{}};return e[r](a,a.exports,t),a.exports}t.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},t.d=(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),(()=>{var e=t(379),n=t.n(e),r=t(795),o=t.n(r),a=t(569),i=t.n(a),s=t(565),c=t.n(s),l=t(216),p=t.n(l),u=t(589),f=t.n(u),d=t(195),g={};g.styleTagTransform=f(),g.setAttributes=c(),g.insert=i().bind(null,"head"),g.domAPI=o(),g.insertStyleElement=p(),n()(d.Z,g),d.Z&&d.Z.locals&&d.Z.locals,"stream"in Blob.prototype||Object.defineProperty(Blob.prototype,"stream",{value(){return new Response(this).body}}),"setBigUint64"in DataView.prototype||Object.defineProperty(DataView.prototype,"setBigUint64",{value(e,n,t){const r=Number(0xffffffffn&n),o=Number(n>>32n);this.setUint32(e+(t?0:4),r,t),this.setUint32(e+(t?4:0),o,t)}});var b=e=>new DataView(new ArrayBuffer(e)),m=e=>new Uint8Array(e.buffer||e),h=e=>Math.min(4294967295,Number(e)),y=e=>Math.min(65535,Number(e));function v(e,n,t){if(void 0===n||n instanceof Uint8Array||(n=A(n)),void 0===t||t instanceof Date||(t=new Date(t)),e instanceof File)return{i:n||A(e.name),o:t||new Date(e.lastModified),A:e.stream()};if(e instanceof Response){const r=e.headers.get("content-disposition"),o=r&&r.match(/;\s*filename\*?=["']?(.*?)["']?$/i),a=o&&o[1]||new URL(e.url).pathname.split("/").pop(),i=a&&decodeURIComponent(a);return{i:n||A(i),o:t||new Date(e.headers.get("Last-Modified")||Date.now()),A:e.body}}if(!n||0===n.length)throw new Error("The file must have a name.");if(void 0===t)t=new Date;else if(isNaN(t))throw new Error("Invalid modification date.");if("string"==typeof e)return{i:n,o:t,A:A(e)};if(e instanceof Blob)return{i:n,o:t,A:e.stream()};if(e instanceof Uint8Array||e instanceof ReadableStream)return{i:n,o:t,A:e};if(e instanceof ArrayBuffer||ArrayBuffer.isView(e))return{i:n,o:t,A:m(e)};if(Symbol.asyncIterator in e)return{i:n,o:t,A:x(e)};throw new TypeError("Unsupported input format.")}function x(e){const n="next"in e?e:e[Symbol.asyncIterator]();return new ReadableStream({async pull(e){let t=0;for(;e.desiredSize>t;){const r=await n.next();if(!r.value){e.close();break}{const n=w(r.value);e.enqueue(n),t+=n.byteLength}}}})}function w(e){return"string"==typeof e?A(e):e instanceof Uint8Array?e:m(e)}function A(e){return(new TextEncoder).encode(String(e))}var S=new WebAssembly.Instance(new WebAssembly.Module(Uint8Array.from(atob("AGFzbQEAAAABCgJgAABgAn9/AXwDAwIAAQUDAQACBw0DAW0CAAF0AAABYwABCpUBAkkBA38DQCABIQBBACECA0AgAEEBdiAAQQFxQaCG4u1+bHMhACACQQFqIgJBCEcNAAsgAUECdCAANgIAIAFBAWoiAUGAAkcNAAsLSQEBfyABQX9zIQFBgIAEIQJBgIAEIABqIQADQCABQf8BcSACLQAAc0ECdCgCACABQQh2cyEBIAJBAWoiAiAASQ0ACyABQX9zuAs"),(e=>e.charCodeAt(0))))),{t:k,c:U,m:B}=S.exports;k();var C=m(B).subarray(65536);function E(e,n=0){for(const t of function*(e){for(;e.length>65536;)yield e.subarray(0,65536),e=e.subarray(65536);e.length&&(yield e)}(e))C.set(t),n=U(t.length,n);return n}function I(e,n,t=0){const r=e.getSeconds()>>1|e.getMinutes()<<5|e.getHours()<<11,o=e.getDate()|e.getMonth()+1<<5|e.getFullYear()-1980<<9;n.setUint16(t,r,1),n.setUint16(t+2,o,1)}function z(e){const n=b(30);return n.setUint32(0,1347093252),n.setUint32(4,754976768),I(e.o,n,10),n.setUint16(26,e.i.length,1),m(n)}async function*q(e){let{A:n}=e;if("then"in n&&(n=await n),n instanceof Uint8Array)yield n,e.u=E(n,0),e.l=BigInt(n.length);else{e.l=0n;const t=n.getReader();for(;;){const{value:n,done:r}=await t.read();if(r)break;e.u=E(n,e.u),e.l+=BigInt(n.length),yield n}}}function D(e,n){const t=b(16+(n?8:0));return t.setUint32(0,1347094280),t.setUint32(4,e.u,1),n?(t.setBigUint64(8,e.l,1),t.setBigUint64(16,e.l,1)):(t.setUint32(8,h(e.l),1),t.setUint32(12,h(e.l),1)),m(t)}function M(e,n,t){const r=b(46);return r.setUint32(0,1347092738),r.setUint32(4,755182848),r.setUint16(8,2048),I(e.o,r,12),r.setUint32(16,e.u,1),r.setUint32(20,h(e.l),1),r.setUint32(24,h(e.l),1),r.setUint16(28,e.i.length,1),r.setUint16(30,t?28:0,1),r.setUint16(40,33204,1),r.setUint32(42,h(n),1),m(r)}function L(e,n){const t=b(28);return t.setUint16(0,1,1),t.setUint16(2,24,1),t.setBigUint64(4,e.l,1),t.setBigUint64(12,e.l,1),t.setBigUint64(20,n,1),m(t)}var F=e=>new Response(x(async function*(e){const n=[];let t=0n,r=0n,o=0;for await(const a of e){yield z(a),yield a.i,yield*q(a);const e=a.l>=0xffffffffn||t>=0xffffffffn;yield D(a,e),n.push(M(a,t,e)),n.push(a.i),e&&(n.push(L(a,t)),t+=8n),r++,t+=BigInt(46+a.i.length)+a.l,o||(o=e)}let a=0n;for(const e of n)yield e,a+=BigInt(e.length);if(o||t>=0xffffffffn){const e=b(76);e.setUint32(0,1347094022),e.setBigUint64(4,BigInt(44),1),e.setUint32(12,755182848),e.setBigUint64(24,r,1),e.setBigUint64(32,r,1),e.setBigUint64(40,a,1),e.setBigUint64(48,t,1),e.setUint32(56,1347094023),e.setBigUint64(64,t+a,1),e.setUint32(72,1,1),yield m(e)}const i=b(22);i.setUint32(0,1347093766),i.setUint16(8,y(r),1),i.setUint16(10,y(r),1),i.setUint32(12,h(a),1),i.setUint32(16,h(t),1),yield m(i)}(async function*(e){for await(const n of e)n instanceof File||n instanceof Response?yield v(n):yield v(n.input,n.name,n.lastModified)}(e))),{headers:{"Content-Type":"application/zip","Content-Disposition":"attachment"}}),Q=function(){function e(){}return e.prototype.downloadAsZip=function(e,n){return t=this,r=void 0,a=function(){var t,r,o,a;return function(e,n){var t,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=n.call(e,i)}catch(e){a=[6,e],r=0}finally{t=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}(this,(function(i){switch(i.label){case 0:return[4,fetch("../app/app.js")];case 1:return t=i.sent(),r={name:"index.html",lastModified:new Date,input:this.createTemplate(e,n)},[4,F([r,t]).blob()];case 2:return o=i.sent(),(a=document.createElement("a")).href=URL.createObjectURL(o),a.download="StripBreakout.zip",a.click(),a.remove(),[2]}}))},new((o=void 0)||(o=Promise))((function(e,n){function i(e){try{c(a.next(e))}catch(e){n(e)}}function s(e){try{c(a.throw(e))}catch(e){n(e)}}function c(n){var t;n.done?e(n.value):(t=n.value,t instanceof o?t:new o((function(e){e(t)}))).then(i,s)}c((a=a.apply(t,r||[])).next())}));var t,r,o,a},e.prototype.createTemplate=function(e,n){var t=e.map((function(e){return"\n                {\n                    image: ".concat(JSON.stringify(e),",\n                    block: {\n                        splitX: isMobileOs ? ").concat(n.spSplit," : ").concat(n.pcSplit,",\n                        splitY: isMobileOs ? ").concat(n.spSplit," : ").concat(n.pcSplit,"\n                    },\n                    clear: {\n                      achievement: ").concat(n.achievement,",\n                    },\n                    player: {\n                        life: ").concat(n.life,"\n                    }\n                }\n            ")}));return'\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset="utf-8" />\n    <meta name="viewport" content="width=device-width,initial-scale=1" />\n    <title>Z2StripBreakout</title>\n  </head>\n  <body>\n    <div style="display: flex; flex-direction: column; align-items: center; justify-content: center">\n        <div id="stbo-app"></div>\n        <div style="font-size: 12px">Generated by <a href="https://github.com/zoni-code/Z2StripBreakout" target="_blank" rel="noopener">Z2StripBreakout</a> version '.concat("0.0.1",'</div>\n    </div>\n    <script type="text/javascript" src="./app.js"><\/script>\n    <script type="text/javascript">\n      StripBreakout(document.getElementById("stbo-app"), (isMobileOs) => {\n          return { \n              stages: [').concat(t.join(","),"]\n          }\n      });\n    <\/script>\n  </body>\n</html>\n")},e}(),T=function(){function e(){}return e.prototype.init=function(){var e=this;document.querySelectorAll("input[name=type]").forEach((function(n){n.addEventListener("change",(function(){e.syncStageForm()}))})),this.syncStageForm()},e.prototype.syncStageForm=function(){var e="blockimage"!==document.querySelector("input[name=type]:checked").value;document.querySelectorAll(".stbo-generator-page-form-stage-block").forEach((function(n){n.hidden=e,n.querySelector("input").disabled=e}))},e.prototype.addStage=function(){var e=this,n=document.querySelector(".stbo-generator-page-form-stages");if(n){var t=document.createElement("div");t.innerHTML=this.createStageForm();var r=t.firstElementChild;if(r){var o=r.querySelector(".stbo-generator-page-form-stage-delete");null==o||o.addEventListener("click",(function(){e.deleteStage(r)})),n.appendChild(r)}}this.syncStageForm()},e.prototype.deleteStage=function(e){var n=document.querySelector(".stbo-generator-page-form-stages");null==n||n.removeChild(e)},e.prototype.getImageConfig=function(){return e=this,n=void 0,r=function(){var e,n,t,r,o,a,i,s,c,l,p,u,f;return function(e,n){var t,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=n.call(e,i)}catch(e){a=[6,e],r=0}finally{t=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}(this,(function(d){switch(d.label){case 0:e=Array.from(document.querySelectorAll(".stbo-generator-page-form-stage")),n=[],t=0,r=e,d.label=1;case 1:return t<r.length?(o=r[t],a=o.querySelector('input[name="foreground"]'),i=o.querySelector('input[name="background"]'),s=o.querySelector('input[name="block"]'),c=document.querySelector("input[name=type]:checked"),a&&a.files&&a.files.length>0&&i&&i.files&&i.files.length>0?[4,this.loadFileAsDataUrl(a.files[0])]:[3,7]):[3,8];case 2:return l=d.sent(),[4,this.loadFileAsDataUrl(i.files[0])];case 3:return p=d.sent(),s&&!s.disabled&&s.files?[4,this.loadFileAsDataUrl(s.files[0])]:[3,5];case 4:return f=d.sent(),[3,6];case 5:f=void 0,d.label=6;case 6:u=f,n.push({type:c.value,foreground:l,background:p,block:u}),d.label=7;case 7:return t++,[3,1];case 8:return[2,n]}}))},new((t=void 0)||(t=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,s)}c((r=r.apply(e,n||[])).next())}));var e,n,t,r},e.prototype.createStageForm=function(){return'\n    <div class="stbo-generator-page-form-stage">\n      <div>\n        <label class="stbo-generator-page-form-stage-label"\n          >前景画像</label\n        >\n        <div class="stbo-generator-page-form-stage-drop-zone">\n          <input type="file" name="foreground" accept=".png" required/>\n        </div>\n      </div>\n      <div>\n        <label class="stbo-generator-page-form-stage-label"\n          >背景画像</label\n        >\n        <div class="stbo-generator-page-form-stage-drop-zone">\n          <input type="file" name="background" accept=".png" required/>\n        </div>\n      </div>\n      <div class="stbo-generator-page-form-stage-block">\n        <label class="stbo-generator-page-form-stage-label"\n          >ブロック画像</label\n        >\n        <div class="stbo-generator-page-form-stage-drop-zone">\n          <input type="file" name="block" accept=".png" required/>\n        </div>\n      </div>\n      <button type="button" class="stbo-generator-page-form-stage-delete" aria-label="ステージ削除">✕</button>\n    </div>\n    '},e.prototype.loadFileAsDataUrl=function(e){return new Promise((function(n,t){var r=new FileReader;r.onload=function(e){e.target&&n(e.target.result)},r.onerror=function(){t()},r.readAsDataURL(e)}))},e}(),j=function(){function e(){}return e.prototype.getGameConfig=function(){return{pcSplit:this.getPcBlockConfig(),spSplit:this.getSpBlockConfig(),achievement:this.getAchievementConfig(),life:this.getPlayerLifeConfig()}},e.prototype.getPcBlockConfig=function(){var e,n=null===(e=document.querySelector("input[name=pcSplit]"))||void 0===e?void 0:e.value;return n?parseInt(n,10):48},e.prototype.getSpBlockConfig=function(){var e,n=null===(e=document.querySelector("input[name=spSplit]"))||void 0===e?void 0:e.value;return n?parseInt(n,10):32},e.prototype.getAchievementConfig=function(){var e,n=null===(e=document.querySelector("input[name=achievement]"))||void 0===e?void 0:e.value;return n?parseInt(n,10):70},e.prototype.getPlayerLifeConfig=function(){var e,n=null===(e=document.querySelector("input[name=life]"))||void 0===e?void 0:e.value;return n?parseInt(n,10):70},e}(),N=function(e,n,t,r){return new(t||(t=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,s)}c((r=r.apply(e,n||[])).next())}))},P=function(e,n){var t,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=n.call(e,i)}catch(e){a=[6,e],r=0}finally{t=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};window.addEventListener("DOMContentLoaded",(function(){var e=document.querySelector(".stbo-generator-page-title-version");e&&(e.textContent="version 0.0.1");var n=new T,t=new j,r=document.querySelector(".stbo-generator-page-form-stage-add");null==r||r.addEventListener("click",(function(){n.addStage()}));var o=document.getElementById("preview-button");null==o||o.addEventListener("click",(function(e){return N(void 0,void 0,void 0,(function(){var e,r;return P(this,(function(o){switch(o.label){case 0:return c()?[4,n.getImageConfig()]:(alert("画像もしくはオプションが指定されていません"),[2]);case 1:return e=o.sent(),r=t.getGameConfig(),function(e,n){var t,r=window;null===(t=r.instance)||void 0===t||t.destroy(),r.instance=r.StripBreakout(document.getElementById("stbo-app"),(function(t){return{stages:e.map((function(e){return{image:e,block:{splitX:t?n.spSplit:n.pcSplit,splitY:t?n.spSplit:n.pcSplit},clear:{achievement:n.achievement},player:{life:n.life}}}))}}))}(e,r),[2]}}))}))}));var a=document.getElementById("download-button");null==a||a.addEventListener("click",(function(){return N(void 0,void 0,void 0,(function(){var e,r;return P(this,(function(o){switch(o.label){case 0:return c()?[4,n.getImageConfig()]:(alert("画像もしくはオプションが指定されていません"),[2]);case 1:return e=o.sent(),r=t.getGameConfig(),[4,(new Q).downloadAsZip(e,r)];case 2:return o.sent(),[2]}}))}))}));var i=document.getElementById("format-detail");null==i||i.addEventListener("click",(function(){var e=document.querySelector(".stbo-generator-page-modals");e&&(e.hidden=!1)}));var s=document.querySelector(".stbo-generator-page-backdrop");function c(){var e;return null===(e=document.querySelector(".stbo-generator-page-form"))||void 0===e?void 0:e.checkValidity()}null==s||s.addEventListener("click",(function(e){if(e.target===s){var n=document.querySelector(".stbo-generator-page-modals");n&&(n.hidden=!0)}})),n.addStage(),n.init()}))})()})();